"use strict";(self.webpackChunkendless_starterkit=self.webpackChunkendless_starterkit||[]).push([[571],{42571:(Qe,w,p)=>{p.d(w,{N:()=>Pe});var g=p(74202),r=p(93075),e=p(5e3),m=p(21242),C=p(33881),Z=p(64383),q=p(4426),f=p(79189),d=p(69808),c=p(98952),h=p(59783),v=p(49150),T=p(40845),A=p(25787);function U(o,s){1&o&&(e.TgZ(0,"div",54),e._UZ(1,"span",55),e.qZA())}function y(o,s){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",57),e._uU(2,"Group Name"),e._UZ(3,"p-sortIcon",58),e.qZA(),e.TgZ(4,"th",59),e._uU(5,"No Of Components "),e._UZ(6,"p-sortIcon",60),e.qZA(),e.TgZ(7,"th",61),e._uU(8,"Total Fees "),e._UZ(9,"p-sortIcon",62),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Actions"),e.qZA(),e.qZA())}function N(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"td"),e.TgZ(9,"div"),e.TgZ(10,"button",63),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).assignFees(a)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.no_of_components),e.xp6(2),e.Oqu(e.xi3(7,3,t.total_fees,"INR"))}}const S=function(){return[10,25,50]};function J(o,s){if(1&o&&(e.TgZ(0,"p-table",56),e.YNc(1,y,12,0,"ng-template",40),e.YNc(2,N,11,6,"ng-template",41),e.qZA()),2&o){const t=e.oxw();e.Q6J("value",t.CompList)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(5,S))}}function L(o,s){if(1&o&&(e.TgZ(0,"option",75),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function I(o,s){if(1&o&&(e.TgZ(0,"option",75),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function M(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"div",64),e.TgZ(2,"div",14),e.TgZ(3,"div",65),e.TgZ(4,"label",10),e._uU(5,"Department "),e.TgZ(6,"span",45),e._uU(7,"*"),e.qZA(),e.qZA(),e.TgZ(8,"select",66),e.NdJ("change",function(){return e.CHM(t),e.oxw().onFilterData("")}),e.TgZ(9,"option",67),e._uU(10,"Select a Department"),e.qZA(),e.YNc(11,L,2,2,"option",68),e.qZA(),e.qZA(),e.TgZ(12,"div",65),e.TgZ(13,"label",10),e._uU(14,"Class "),e.TgZ(15,"span",45),e._uU(16,"*"),e.qZA(),e.qZA(),e.TgZ(17,"select",69),e.NdJ("change",function(){return e.CHM(t),e.oxw().onFilterData("")}),e.TgZ(18,"option",67),e._uU(19,"Select a Class"),e.qZA(),e.YNc(20,I,2,2,"option",68),e.qZA(),e.qZA(),e.TgZ(21,"div",70),e.TgZ(22,"div",9),e.TgZ(23,"label",10),e._uU(24,"Class"),e.qZA(),e.TgZ(25,"input",71),e.NdJ("keyup",function(i){return e.CHM(t),e.oxw().onFilterData(i.target.value)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",72),e.TgZ(27,"div",9),e.TgZ(28,"label",10),e._uU(29,"\xa0"),e.qZA(),e.TgZ(30,"button",73),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.reset(),i.onFilterData("")}),e._uU(31,"Clear"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(32,"div",74),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(8),e.Q6J("formControl",t.filterForm.controls.department),e.xp6(3),e.Q6J("ngForOf",t.departmentList),e.xp6(6),e.Q6J("formControl",t.filterForm.controls.class),e.xp6(3),e.Q6J("ngForOf",t.classList),e.xp6(5),e.Q6J("formControl",t.filterForm.controls.studentName)}}function R(o,s){1&o&&(e.TgZ(0,"div",54),e._UZ(1,"span",55),e.qZA())}function O(o,s){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",76),e._uU(2,"component_name "),e._UZ(3,"p-sortIcon",77),e.qZA(),e.TgZ(4,"th",78),e._uU(5,"Fees "),e._UZ(6,"p-sortIcon",79),e.qZA(),e.qZA())}function k(o,s){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.qZA()),2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.component_name),e.xp6(2),e.Oqu(e.xi3(5,2,t.fees,"INR"))}}function Y(o,s){if(1&o&&(e.TgZ(0,"p-table",39),e.YNc(1,O,7,0,"ng-template",40),e.YNc(2,k,6,5,"ng-template",41),e.qZA()),2&o){const t=e.oxw();e.Q6J("value",t.feeComponents)("paginator",!0)("rows",10)("showCurrentPageReport",!0)}}function P(o,s){1&o&&(e.TgZ(0,"div",54),e._UZ(1,"span",55),e.qZA())}function G(o,s){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",81),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",82),e._uU(4,"Student Name "),e._UZ(5,"p-sortIcon",83),e.qZA(),e.TgZ(6,"th",84),e._uU(7,"Medium "),e._UZ(8,"p-sortIcon",85),e.qZA(),e.TgZ(9,"th",86),e._uU(10,"Class "),e._UZ(11,"p-sortIcon",87),e.qZA(),e.qZA())}function Q(o,s){if(1&o&&(e.TgZ(0,"tr",88),e.TgZ(1,"td"),e._UZ(2,"p-tableCheckbox",89),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.qZA()),2&o){const t=s.$implicit,n=e.oxw(2);e.Q6J("pSelectableRow",t),e.xp6(2),e.Q6J("value",t)("disabled",n.isFeeAsigned(t)),e.xp6(2),e.Oqu(t.student_name),e.xp6(2),e.Oqu(t.department),e.xp6(2),e.Oqu(t.class)}}function D(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"p-table",80),e.NdJ("selectionChange",function(i){return e.CHM(t),e.oxw().selectedStudents=i}),e.YNc(1,G,12,0,"ng-template",40),e.YNc(2,Q,9,6,"ng-template",41),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("value",t.StudentList)("selection",t.selectedStudents)("paginator",!0)("rowSelectable",t.isRowSelectable)("rows",10)("showCurrentPageReport",!0)}}function V(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"td"),e.TgZ(7,"input",90),e.NdJ("keyup",function(){const a=e.CHM(t).$implicit;return e.oxw().updateFees(a)})("ngModelChange",function(i){return e.CHM(t).$implicit.discount=i}),e.qZA(),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit,n=s.index;e.xp6(2),e.hij(" ",n+1," "),e.xp6(2),e.AsE("",t.component_name,"\xa0 (",e.xi3(5,5,t.actual_fees,"INR"),")"),e.xp6(3),e.Q6J("ngModel",t.discount),e.xp6(2),e.Oqu(e.xi3(10,8,t.applicable_fees,"INR"))}}function E(o,s){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Name"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Discount"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Applicable Fees"),e.qZA(),e.qZA())}function j(o,s){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"currency"),e.qZA(),e.qZA()),2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.component_name),e.xp6(2),e.Oqu(e.xi3(5,3,t.discount,"INR")),e.xp6(3),e.Oqu(e.xi3(8,6,t.applicable_fees,"INR"))}}function H(o,s){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Student Name"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Department"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Class"),e.qZA(),e.qZA())}function $(o,s){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.qZA()),2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.student_name),e.xp6(2),e.Oqu(t.department),e.xp6(2),e.Oqu(t.class)}}function B(o,s){1&o&&e._UZ(0,"i",91)}const z=function(){return{symbol:"\uf02c",fontFamily:"FontAwesome "}},K=function(){return{symbol:"\uf0c0",fontFamily:"FontAwesome "}},W=function(){return{symbol:"\uf0d6",fontFamily:"FontAwesome "}},X=function(){return{symbol:"\uf0c1",fontFamily:"FontAwesome "}};let ee=(()=>{class o{constructor(t,n,i,a,l){this.apiService=t,this.feeService=n,this.router=i,this.toster=a,this.confirmationService=l,this.loader=!1,this.isFilter=!0,this.StudentList=[],this.Students=[],this.selectedStudents=[],this.temp=[],this.rows=[],this.feeComponents=[],this.CompList=[],this.feeGroups=[],this.feeComponentList=[],this.feeNotes="",this.due_date="",this.departmentList=[],this.classList=[],this.dataFetch=!1,this.filterValue="",this.filterGroupValue="",this.filterForm=new r.cw({academicYear:new r.NI(""),department:new r.NI(""),class:new r.NI(""),studentName:new r.NI("")}),this.isRowSelectable=this.isRowSelectable.bind(this)}ngOnInit(){this.loader=!1,this.dataFetch=!0,this.apiService.getTypeRequest("table_data/FEE_GROUP").subscribe(t=>{t.result&&(this.dataFetch=!1,this.feeGroups=this.CompList=[],this.feeGroups=this.CompList=t.data)}),this.apiService.getTypeRequest("dropdown_data/DEPARTMENT").subscribe(t=>{t.result&&(this.departmentList=[],this.departmentList=t.data)}),this.apiService.getTypeRequest("dropdown_data/CLASS").subscribe(t=>{t.result&&(this.classList=[],this.classList=t.data)}),this.apiService.getTypeRequest("all_student_for_fee").subscribe(t=>{t.result&&(this.StudentList=[],this.Students=[],this.dataFetch=!1,t.data.forEach(n=>{this.Students.push(n)}),this.StudentList=this.Students)})}assignFees(t){this.feeComponent=t,this.dataFetch=!0,this.apiService.getTypeRequest(`fee_component/by_group/${t.id}`).subscribe(n=>{n.result&&(this.dataFetch=!1,this.feeComponents=n.data,this.feeComponentList=[],n.data.forEach(i=>{this.feeComponentList.push({component_name:i.component_name,fee_component_id:i.fee_component_id,discount:0,applicable_fees:i.fees,actual_fees:i.fees}),this.ngOnInit()}))})}onFilterData(t){this.StudentList=[],this.Students.filter(n=>{(!this.filterForm.get("academicYear").value||n.academic_year.includes(this.filterForm.get("academicYear").value))&&(!this.filterForm.get("department").value||n.department.includes(this.filterForm.get("department").value))&&(!this.filterForm.get("class").value||n.class.includes(this.filterForm.get("class").value))&&(n.student_name.toLowerCase().includes(t.toLowerCase())||n.admission_no.toString().includes(t))&&this.StudentList.push(n)})}reset(){this.filterForm.reset({academicYear:"",department:"",class:"",studentName:""})}updateFees(t){var n;let i=this.feeComponents.find(a=>a.fee_component_id==t.fee_component_id).fees;this.feeComponentList.find(a=>a.fee_component_id==t.fee_component_id).applicable_fees=null!==(n=i-t.discount)&&void 0!==n?n:0}updateFeeList(){this.feeComponentList.forEach(t=>{t.discount=t.discount>0?t.discount:0})}assignFee(){this.loader=!0;let t=[],n=[];this.selectedStudents.forEach(i=>{t.push(i.student_id)}),t.length>0&&(this.feeComponentList.forEach(a=>{n.push({fee_component_id:a.fee_component_id,discount:a.discount>0?a.discount:0,applicable_fees:a.applicable_fees})}),this.apiService.postTypeRequest("assign_fee/by_student",{fee_group_id:this.feeComponent.id,student_ids:t,fee_component_data:n,due_date:this.due_date,notes:this.feeNotes}).subscribe(a=>{a.result&&(this.toster.success("Data Updated"),this.confirmationService.showSuccessMessage("Added!",a.message),this.router.navigate(["/reports/dueFees"]))}))}isRowSelectable(t){return!this.isFeeAsigned(t.data)}isFeeAsigned(t){let n=!1;for(const i of t.assigned_fee)if(i.fee_group_id==this.feeComponent.id){n=!0;break}return n}dateChange(t,n){this.due_date=t.day+"-"+t.month+"-"+t.year}onFilter(t){this.CompList=[],this.feeGroups.filter(this.filterGroupValue.length>0?n=>{n.name==this.filterGroupValue&&this.CompList.push(n)}:n=>{n.name.toLowerCase().includes(t.toLowerCase())&&this.CompList.push(n)})}onClear(){this.CompList=this.feeGroups}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.s),e.Y36(C.P),e.Y36(g.F0),e.Y36(Z._W),e.Y36(q.Y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-assign-fees"]],decls:115,vars:31,consts:[[1,"container-fluid"],["navBarLayout","large-filled-symbols"],["stepTitle","Select Fee Group",3,"navigationSymbol"],[1,"card"],[1,"card-header"],[1,"collapse","show"],[1,"card-body"],[1,"row","pl-3","pr-3",2,"gap","10px"],[1,"col-md-8","col-sm-12"],[1,"faq-form"],["for","bg_id"],["type","text","placeholder","Search..",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"col-md-3","col-sm-12","d-flex","justify-content-around"],["type","button",1,"btn","btn-warning","text-center","mt-4",2,"height","35px",3,"click"],[1,"row"],[1,"card-body","custom-datatable"],["class","loader-box center",4,"ngIf"],["rowGroupMode","rowspan","groupRowsBy","group_name","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions",4,"ngIf"],["stepTitle","Select Student",3,"navigationSymbol"],["id","accordionoc",1,"default-according","style-1","faq-accordion","job-accordion"],[1,"col-12"],[1,"mb-0"],["aria-controls","collapse",1,"btn","btn-link","pl-0",3,"click"],["class","collapse show",4,"ngIf"],[1,"col-4"],[1,"card","p-2"],["class","table","responsiveLayout","scroll",3,"value","paginator","rows","showCurrentPageReport",4,"ngIf"],[1,"col-8","pl-2"],["class","table","dataKey","student_id","selectionMode","multiple","responsiveLayout","scroll",3,"value","selection","paginator","rowSelectable","rows","showCurrentPageReport","selectionChange",4,"ngIf"],[1,"row","justify-content-around","mb-5"],["awPreviousStep","",1,"btn","btn-primary","btn-next"],["awNextStep","",1,"btn","btn-primary","btn-next",3,"disabled"],["stepTitle","Add Discounts",3,"navigationSymbol"],[1,"table-responsive","mb-3"],[1,"table"],[4,"ngFor","ngForOf"],["awNextStep","",1,"btn","btn-primary","btn-next",3,"click"],["stepTitle","Assign Fees",3,"navigationSymbol"],[1,"col-6"],["responsiveLayout","scroll",1,"table",3,"value","paginator","rows","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["id","permanent_address","rows","5","cols","5","placeholder","Fees for A-B standards with discount",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group"],["for","registered_on"],[1,"font-danger"],[1,"input-group","custom-datepicker","job-input-datepicker"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"dateSelect"],["registered_on","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-calendar"],[1,"btn","btn-primary","btn-next",3,"disabled","click"],["class","fa fa-circle-o-notch fa-spin",4,"ngIf"],[1,"loader-box","center"],[1,"rotate","dashed"],["rowGroupMode","rowspan","groupRowsBy","group_name","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pSortableColumn","name"],["field","name"],["pSortableColumn","no_of_components"],["field","no_of_components"],["pSortableColumn","total_fees"],["field","total_fees"],["pButton","","pRipple","","type","button","icon","pi pi-link","awNextStep","",1,"p-button-rounded",2,"height","35px","width","35px",3,"click"],[1,"card-body","filter-cards-view","animate-chk"],[1,"col-xl-3","col-md-6","col-sm-12"],["id","bg_id","placeholder","Kannada",1,"form-control",3,"formControl","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","bg_id","placeholder","1",1,"form-control",3,"formControl","change"],[1,"col-xl-3","col-md-6","col-sm-12","mb-3"],["type","text","placeholder","Search..",1,"form-control",3,"formControl","keyup"],[1,"col-xl-3","col-md-6","col-sm-12","float-right"],[1,"btn","btn-primary","text-center","align-self-center","align-bottom",3,"click"],[1,"row","d-flex","align-items-center"],[3,"value"],["pSortableColumn","component_name"],["field","component_name"],["pSortableColumn","fees"],["field","fees"],["dataKey","student_id","selectionMode","multiple","responsiveLayout","scroll",1,"table",3,"value","selection","paginator","rowSelectable","rows","showCurrentPageReport","selectionChange"],[2,"width","3rem"],["pSortableColumn","student_name"],["field","student_name"],["pSortableColumn","department"],["field","department"],["pSortableColumn","class"],["field","class"],[3,"pSelectableRow"],[3,"value","disabled"],["type","number",1,"form-control",2,"max-width","60%",3,"ngModel","keyup","ngModelChange"],[1,"fa","fa-circle-o-notch","fa-spin"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"aw-wizard",1),e.TgZ(2,"aw-wizard-step",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h5"),e._uU(6,"Fee Groups"),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"label",10),e._uU(13,"Fee Group Name"),e.qZA(),e.TgZ(14,"input",11),e.NdJ("ngModelChange",function(l){return n.filterValue=l})("keyup",function(l){return n.onFilter(l.target.value)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",12),e.TgZ(16,"button",13),e.NdJ("click",function(){return n.filterValue="",n.filterGroupValue="",n.onClear()}),e._uU(17,"Clear"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",14),e.TgZ(19,"div",15),e.YNc(20,U,2,0,"div",16),e.YNc(21,J,3,6,"p-table",17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"aw-wizard-step",18),e.TgZ(23,"div",19),e.TgZ(24,"div",14),e.TgZ(25,"div",20),e.TgZ(26,"div",3),e.TgZ(27,"div",4),e.TgZ(28,"h5",21),e.TgZ(29,"button",22),e.NdJ("click",function(){return n.isFilter=!n.isFilter}),e._uU(30,"Filter"),e.qZA(),e.qZA(),e.qZA(),e.YNc(31,M,33,5,"div",23),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",14),e.TgZ(33,"div",24),e.TgZ(34,"div",25),e.YNc(35,R,2,0,"div",16),e.YNc(36,Y,3,4,"p-table",26),e.qZA(),e.qZA(),e.TgZ(37,"div",27),e.TgZ(38,"div",25),e.YNc(39,P,2,0,"div",16),e.YNc(40,D,3,6,"p-table",28),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",29),e.TgZ(42,"button",30),e._uU(43,"Previous"),e.qZA(),e.TgZ(44,"button",31),e._uU(45,"Next"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"aw-wizard-step",32),e.TgZ(47,"div",3),e.TgZ(48,"div",6),e.TgZ(49,"div",33),e.TgZ(50,"table",34),e.TgZ(51,"thead"),e.TgZ(52,"tr"),e.TgZ(53,"th"),e._uU(54,"SlNo"),e.qZA(),e.TgZ(55,"th"),e._uU(56,"Fee Component"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Discount"),e.qZA(),e.TgZ(59,"th"),e._uU(60,"Applicable Fees"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"tbody"),e.YNc(62,V,11,11,"tr",35),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(63,"div",29),e.TgZ(64,"button",30),e._uU(65,"Previous"),e.qZA(),e.TgZ(66,"button",36),e.NdJ("click",function(){return n.updateFeeList()}),e._uU(67,"Next"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(68,"aw-wizard-step",37),e.TgZ(69,"div",14),e.TgZ(70,"div",38),e.TgZ(71,"div",3),e.TgZ(72,"div",4),e.TgZ(73,"h5"),e._uU(74,"Fee Details"),e.qZA(),e.qZA(),e.TgZ(75,"div",6),e.TgZ(76,"p-table",39),e.YNc(77,E,7,0,"ng-template",40),e.YNc(78,j,9,9,"ng-template",41),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(79,"div",38),e.TgZ(80,"div",3),e.TgZ(81,"div",4),e.TgZ(82,"h5"),e._uU(83,"Selected Students"),e.qZA(),e.qZA(),e.TgZ(84,"div",6),e.TgZ(85,"p-table",39),e.YNc(86,H,7,0,"ng-template",40),e.YNc(87,$,7,3,"ng-template",41),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(88,"div",14),e.TgZ(89,"div",20),e.TgZ(90,"div",3),e.TgZ(91,"div",4),e.TgZ(92,"h5"),e._uU(93,"Other Details"),e.qZA(),e.qZA(),e.TgZ(94,"div",6),e.TgZ(95,"label",10),e._uU(96,"Notes"),e.qZA(),e.TgZ(97,"textarea",42),e.NdJ("ngModelChange",function(l){return n.feeNotes=l}),e.qZA(),e.TgZ(98,"div",43),e.TgZ(99,"label",44),e._uU(100,"Due On "),e.TgZ(101,"span",45),e._uU(102,"*"),e.qZA(),e.qZA(),e.TgZ(103,"div",46),e.TgZ(104,"input",47,48),e.NdJ("dateSelect",function(l){return n.dateChange(l,"registered_on")}),e.qZA(),e.TgZ(106,"div",49),e.TgZ(107,"button",50),e.NdJ("click",function(){return e.CHM(i),e.MAs(105).toggle()}),e._UZ(108,"i",51),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(109,"div",29),e.TgZ(110,"button",30),e._uU(111,"Previous"),e.qZA(),e.TgZ(112,"button",52),e.NdJ("click",function(){return n.assignFee()}),e._uU(113),e.YNc(114,B,1,0,"i",53),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(2),e.Q6J("navigationSymbol",e.DdM(27,z)),e.xp6(12),e.Q6J("ngModel",n.filterValue),e.xp6(6),e.Q6J("ngIf",n.dataFetch),e.xp6(1),e.Q6J("ngIf",!n.dataFetch),e.xp6(1),e.Q6J("navigationSymbol",e.DdM(28,K)),e.xp6(7),e.uIk("aria-expanded",!n.isFilter),e.xp6(2),e.Q6J("ngIf",n.isFilter),e.xp6(4),e.Q6J("ngIf",n.dataFetch),e.xp6(1),e.Q6J("ngIf",!n.dataFetch&&n.feeComponentList.length>0),e.xp6(3),e.Q6J("ngIf",n.dataFetch),e.xp6(1),e.Q6J("ngIf",!n.dataFetch&&(null==n.feeComponent?null:n.feeComponent.id)),e.xp6(4),e.Q6J("disabled",!(n.selectedStudents.length>0)),e.xp6(2),e.Q6J("navigationSymbol",e.DdM(29,W)),e.xp6(16),e.Q6J("ngForOf",n.feeComponentList),e.xp6(6),e.Q6J("navigationSymbol",e.DdM(30,X)),e.xp6(8),e.Q6J("value",n.feeComponentList)("paginator",!0)("rows",10)("showCurrentPageReport",!0),e.xp6(9),e.Q6J("value",n.selectedStudents)("paginator",!0)("rows",10)("showCurrentPageReport",!0),e.xp6(12),e.Q6J("ngModel",n.feeNotes),e.xp6(15),e.Q6J("disabled",n.due_date.length<1||n.loader),e.xp6(1),e.hij("",n.loader?"":"Submit","\xa0"),e.xp6(1),e.Q6J("ngIf",n.loader))},directives:[f.Pl,f.GZ,r.Fj,r.JJ,r.On,d.O5,f.ei,f.j,d.sg,c.iA,h.jx,v.J4,c.lQ,c.fz,T.Hq,A.H,r.EJ,r.oH,r.YN,r.Kr,c.Mo,c.Ei,c.UA,r.wV],pipes:[d.H9],styles:[".center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),o})();var te=p(34761),ne=p(20145),oe=p(58719),ie=p(72308);function se(o,s){if(1&o&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function ae(o,s){if(1&o&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function re(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"div",14),e.TgZ(2,"div",1),e.TgZ(3,"div",15),e.TgZ(4,"label",16),e._uU(5,"Department "),e.TgZ(6,"span",17),e._uU(7,"*"),e.qZA(),e.qZA(),e.TgZ(8,"select",18),e.NdJ("change",function(){return e.CHM(t),e.oxw().onFilterData("")}),e.TgZ(9,"option",19),e._uU(10,"Select a Department"),e.qZA(),e.YNc(11,se,2,2,"option",20),e.qZA(),e.qZA(),e.TgZ(12,"div",15),e.TgZ(13,"label",16),e._uU(14,"Class "),e.TgZ(15,"span",17),e._uU(16,"*"),e.qZA(),e.qZA(),e.TgZ(17,"select",21),e.NdJ("change",function(){return e.CHM(t),e.oxw().onFilterData("")}),e.TgZ(18,"option",19),e._uU(19,"Select a Class"),e.qZA(),e.YNc(20,ae,2,2,"option",20),e.qZA(),e.qZA(),e.TgZ(21,"div",22),e.TgZ(22,"div",23),e.TgZ(23,"label",16),e._uU(24,"Name"),e.qZA(),e.TgZ(25,"input",24),e.NdJ("keyup",function(i){return e.CHM(t),e.oxw().onFilterData(i.target.value)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",25),e.TgZ(27,"div",23),e.TgZ(28,"label",16),e._uU(29,"\xa0"),e.qZA(),e.TgZ(30,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.reset(),i.onFilterData("")}),e._uU(31,"Clear"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(32,"div",27),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(8),e.Q6J("formControl",t.filterForm.controls.department),e.xp6(3),e.Q6J("ngForOf",t.departmentList),e.xp6(6),e.Q6J("formControl",t.filterForm.controls.class),e.xp6(3),e.Q6J("ngForOf",t.classList),e.xp6(5),e.Q6J("formControl",t.filterForm.controls.studentName)}}function le(o,s){1&o&&(e.TgZ(0,"div",29),e._UZ(1,"span",30),e.qZA())}function pe(o,s){1&o&&(e.TgZ(0,"tr"),e._UZ(1,"th",37),e.TgZ(2,"th"),e._uU(3,"SlNo"),e.qZA(),e.TgZ(4,"th",38),e._uU(5,"Name "),e._UZ(6,"p-sortIcon",39),e.qZA(),e.TgZ(7,"th",40),e._uU(8,"Medium "),e._UZ(9,"p-sortIcon",41),e.qZA(),e.TgZ(10,"th",42),e._uU(11,"Class "),e._UZ(12,"p-sortIcon",43),e.qZA(),e.TgZ(13,"th",44),e._uU(14,"Balance "),e._UZ(15,"p-sortIcon",45),e.qZA(),e.TgZ(16,"th",46),e._uU(17,"Status "),e._UZ(18,"p-sortIcon",47),e.qZA(),e.qZA())}function ce(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr",48),e.NdJ("click",function(i){const l=e.CHM(t).$implicit;return e.oxw(),e.MAs(1).toggleRow(l,i)}),e.TgZ(1,"td"),e.TgZ(2,"button",49),e.NdJ("click",function(i){const l=e.CHM(t).$implicit;return e.oxw(),e.MAs(1).toggleRow(l,i)}),e.qZA(),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"img",50),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"currency"),e.qZA(),e.TgZ(15,"td"),e.TgZ(16,"button",51),e.TgZ(17,"b"),e._uU(18),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit,n=s.rowIndex,i=s.expanded;e.xp6(2),e.Q6J("pRowToggler",t)("icon",i?"pi pi-chevron-down":"pi pi-chevron-right"),e.xp6(2),e.Oqu(n+1),e.xp6(2),e.s9C("src",t.student_photo,e.LSH),e.Q6J("alt",t.student_name),e.xp6(1),e.hij(" ",t.student_name,""),e.xp6(2),e.Oqu(t.department),e.xp6(2),e.Oqu(t.class),e.xp6(2),e.Oqu(e.xi3(14,11,t.balance,"INR")),e.xp6(3),e.Q6J("ngClass",t.balance>0?"btn-danger":"btn-primary"),e.xp6(2),e.Oqu(t.balance>0?"UnPaid":"Paid")}}function de(o,s){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Academic Name "),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Fee Group "),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Actual Fees "),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Balance "),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Due Date "),e.qZA(),e._UZ(11,"th",55),e.qZA())}function ue(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e.TgZ(14,"button",56),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw().$implicit;return e.oxw(2).payFees(a,l)}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.current_academic_name),e.xp6(2),e.Oqu(t.fee_group_name),e.xp6(2),e.Oqu(e.xi3(7,5,t.actual_fees,"INR")),e.xp6(3),e.Oqu(e.xi3(10,8,t.fee_balance,"INR")),e.xp6(3),e.Oqu(t.due_date)}}function _e(o,s){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",52),e.TgZ(2,"div",53),e.TgZ(3,"p-table",54),e.YNc(4,de,12,0,"ng-template",33),e.YNc(5,ue,15,11,"ng-template",34),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=s.$implicit;e.xp6(3),e.Q6J("value",t.assigned_fee)}}function ge(o,s){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",57),e._uU(2,"There are no due fees."),e.qZA(),e.qZA())}const me=function(){return[10,25,50]};function Ze(o,s){if(1&o&&(e.TgZ(0,"p-table",31,32),e.YNc(2,pe,19,0,"ng-template",33),e.YNc(3,ce,19,14,"ng-template",34),e.YNc(4,_e,6,1,"ng-template",35),e.YNc(5,ge,3,0,"ng-template",36),e.qZA()),2&o){const t=e.oxw();e.Q6J("value",t.StudentList)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(5,me))}}let fe=(()=>{class o{constructor(t,n,i,a,l,u){this.studentService=t,this.dialog=n,this.apiService=i,this.feeService=a,this.router=l,this.toster=u,this.isFilter=!0,this.dataFetch=!1,this.filterForm=new r.cw({academicYear:new r.NI(""),department:new r.NI(""),class:new r.NI(""),studentName:new r.NI("")}),this.List=[],this.departmentList=[],this.classList=[],this.StudentList=[],this.Students=[]}ngOnInit(){this.dataFetch=!0,this.apiService.getTypeRequest("dropdown_data/DEPARTMENT").subscribe(t=>{t.result&&(this.departmentList=t.data)}),this.apiService.getTypeRequest("dropdown_data/CLASS").subscribe(t=>{t.result&&(this.classList=t.data)}),this.apiService.getTypeRequest("get_due_fees").subscribe(t=>{t.result?(this.StudentList=t.data,this.Students=this.StudentList,this.dataFetch=!1):this.toster.error(t.message)})}payFees(t,n){this.dialog.open(te.s,{data:{student_name:n.student_name,fee_allocation_id:t.fee_allocation_id,fee_group_name:t.fee_group_name,student_id:n.student_id,current_academic_name:t.current_academic_name,fee_component_data:t.fee_component_data},width:"50%",height:"80%"}).afterClosed().subscribe(a=>{(null==a?void 0:a.result)&&(this.ngOnInit(),this.dialog.open(ne.o,{data:{id:a.data.student.TXN_ID},height:"88%",width:"80%"}))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(oe.V),e.Y36(ie.uw),e.Y36(m.s),e.Y36(C.P),e.Y36(g.F0),e.Y36(Z._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-collect-fees"]],decls:20,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],["id","accordionoc",1,"default-according","style-1","faq-accordion","job-accordion"],[1,"card"],[1,"card-header"],[1,"mb-0"],["aria-controls","collapse",1,"btn","btn-link","pl-0",3,"click"],["class","collapse show",4,"ngIf"],[1,"card-body"],[1,"col"],["class","loader-box center",4,"ngIf"],["dataKey","student_name","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions",4,"ngIf"],[1,"collapse","show"],[1,"card-body","filter-cards-view","animate-chk"],[1,"col-xl-3","col-md-6","col-sm-12"],["for","bg_id"],[1,"font-danger"],["id","bg_id","placeholder","Kannada",1,"form-control",3,"formControl","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","bg_id","placeholder","1",1,"form-control",3,"formControl","change"],[1,"col-xl-3","col-md-6","col-sm-12","mb-3"],[1,"faq-form"],["type","text","placeholder","Search..",1,"form-control",3,"formControl","keyup"],[1,"col-xl-3","col-md-6","col-sm-12","float-right"],[1,"btn","btn-primary","text-center","align-self-center","align-bottom",3,"click"],[1,"row","d-flex","align-items-center"],[3,"value"],[1,"loader-box","center"],[1,"rotate","dashed"],["dataKey","student_name","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["dt1",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[2,"width","3rem"],["pSortableColumn","student_name"],["field","student_name"],["pSortableColumn","department"],["field","department"],["pSortableColumn","class"],["field","class"],["pSortableColumn","balance"],["field","balance"],["pSortableColumn","status"],["field","status"],[2,"cursor","pointer",3,"click"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",2,"height","35px","width","35px",3,"pRowToggler","icon","click"],["height","50px","width","50px",1,"middle",2,"border-radius","50%",3,"src","alt"],["type","button","placement","top",1,"btn","btn-pill","active",3,"ngClass"],["colspan","7"],[1,"p-1"],["dataKey","fee_group_name",3,"value"],[2,"width","4rem"],["pButton","","pRipple","","type","button","icon","pi pi-upload","ngbTooltip","Pay",1,"p-button-rounded","btn-success","ml-1",2,"height","35px","width","35px",3,"click"],["colspan","6"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"h5",6),e.TgZ(9,"button",7),e.NdJ("click",function(){return n.isFilter=!n.isFilter}),e._uU(10,"Filter"),e.qZA(),e.qZA(),e.qZA(),e.YNc(11,re,33,5,"div",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",1),e.TgZ(13,"div",2),e.TgZ(14,"div",4),e.TgZ(15,"div",9),e.TgZ(16,"div",1),e.TgZ(17,"div",10),e.YNc(18,le,2,0,"div",11),e.YNc(19,Ze,6,6,"p-table",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.uIk("aria-expanded",!n.isFilter),e.xp6(2),e.Q6J("ngIf",n.isFilter),e.xp6(7),e.Q6J("ngIf",n.dataFetch),e.xp6(1),e.Q6J("ngIf",!n.dataFetch))},directives:[d.O5,r.EJ,r.JJ,r.oH,r.YN,r.Kr,d.sg,r.Fj,c.iA,h.jx,c.lQ,c.fz,T.Hq,A.H,c.jB,d.mk,v._L],pipes:[d.H9],styles:[".center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:baseline}"]}),o})();var b=p(70655),_=p(58233),F=p(70812),x=p(34578),he=p(15091);function Te(o,s){1&o&&(e.TgZ(0,"div",37),e._uU(1,"Name is required."),e.qZA())}function Ae(o,s){if(1&o&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Ce(o,s){1&o&&(e.TgZ(0,"div",37),e._uU(1,"Fee Group is required."),e.qZA())}function qe(o,s){1&o&&(e.TgZ(0,"div",37),e._uU(1,"Fees is required."),e.qZA())}function ve(o,s){1&o&&e._UZ(0,"i",39)}function be(o,s){if(1&o&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Fe(o,s){1&o&&(e.TgZ(0,"div",40),e._UZ(1,"span",41),e.qZA())}function xe(o,s){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",45),e._uU(2,"Group "),e._UZ(3,"p-sortIcon",46),e.qZA(),e.TgZ(4,"th",47),e._uU(5,"Name "),e._UZ(6,"p-sortIcon",48),e.qZA(),e.TgZ(7,"th",49),e._uU(8,"Fees "),e._UZ(9,"p-sortIcon",50),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Actions"),e.qZA(),e.qZA())}function we(o,s){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw(),i=t.$implicit;e.uIk("rowspan",t.rowspan),e.xp6(1),e.Oqu(i.group_name)}}function Ue(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.YNc(1,we,2,2,"td",51),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"currency"),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"div"),e.TgZ(9,"button",52),e.NdJ("click",function(){const i=e.CHM(t),a=i.rowIndex,l=i.$implicit;return e.oxw(2).editClick(a,l)}),e.qZA(),e.TgZ(10,"button",53),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).onDelete(a.fee_component_id)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit,n=s.rowgroup;e.xp6(1),e.Q6J("ngIf",n),e.xp6(2),e.Oqu(t.component_name),e.xp6(2),e.Oqu(e.xi3(6,3,t.fees,"INR"))}}const ye=function(){return[10,25,50]};function Ne(o,s){if(1&o&&(e.TgZ(0,"p-table",42),e.YNc(1,xe,12,0,"ng-template",43),e.YNc(2,Ue,11,6,"ng-template",44),e.qZA()),2&o){const t=e.oxw();e.Q6J("value",t.CompList)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(5,ye))}}let Se=(()=>{class o{constructor(t,n,i,a,l,u,Ge){this.router=t,this.apiService=n,this.dialog=i,this.spinner=a,this.toster=l,this.feeService=u,this.confirmationService=Ge,this.loader=!1,this.isfeeComponentsFilter=!0,this.dataFetch=!1,this.List=[],this.CompList=[],this.feeComponents=[],this.feeComponentGroup=[],this.filterValue="",this.filterGroupValue="",this.ColumnMode=_.hq,this.SortType=_.ER,this.FeeComponent=new r.cw({fee_component_id:new r.NI(""),component_name:new r.NI("",[r.kI.required]),group_name:new r.NI(""),group_id:new r.NI("",[r.kI.required]),fees:new r.NI("",[r.kI.required])})}ngOnInit(){this.loader=!1,this.dataFetch=!0,this.apiService.getTypeRequest("table_data/FEE_COMPONENT").subscribe(t=>{t.result&&(this.CompList=t.data,this.feeComponents=t.data),this.dataFetch=!1}),this.dataFetch=!0,this.apiService.getTypeRequest("dropdown_data/FEE_GROUP").subscribe(t=>{t.result&&(this.List=t.data),this.dataFetch=!1})}editClick(t,n){this.FeeComponent.patchValue({fee_component_id:n.fee_component_id,component_name:n.component_name,group_name:n.group_name,group_id:n.group_id,fees:n.fees})}onClearForm(){this.FeeComponent.reset({fee_component_id:null,component_name:"",group_name:"",group_id:"",fees:null})}update(t){}onClear(){this.CompList=this.feeComponents}onFilter(t){this.CompList=[],this.feeComponents.filter(this.filterGroupValue.length>0?n=>{n.component_name.toLowerCase().includes(t.toLowerCase())&&n.group_id==this.filterGroupValue&&this.CompList.push(n)}:n=>{n.component_name.toLowerCase().includes(t.toLowerCase())&&this.CompList.push(n)})}isValueAvailable(){return!(this.List.filter(n=>{if(n.name.toLowerCase()==this.FeeComponent.get("component_name").value.toLowerCase())return n}).length>0)}onAddNew(){if(this.loader=!0,this.FeeComponent.valid)if(this.FeeComponent.get("fee_component_id").value){var t={fee_component_id:this.FeeComponent.get("fee_component_id").value,fee_group_id:this.FeeComponent.get("group_id").value,fee_component_name:this.FeeComponent.get("component_name").value,fees:this.FeeComponent.get("fees").value};this.confirmationService.showUpdateConfirmDialog().then(i=>{i.value?this.apiService.postTypeRequest("fee_component/update",t).toPromise().then(a=>{a.result?(this.toster.warning("Data Updated"),this.confirmationService.showWarningMessage("Data Updated",a.message),this.onClearForm(),this.ngOnInit()):this.confirmationService.showErrorMessage("Cancelled!",a.message)}):this.loader=!1})}else{var n={fee_group_id:this.FeeComponent.get("group_id").value,fee_component_name:this.FeeComponent.get("component_name").value,fees:this.FeeComponent.get("fees").value};this.apiService.postTypeRequest("fee_component/insert",n).subscribe(i=>{i.result?(this.feeComponents=i.data,this.List=i.data,this.ngOnInit(),this.toster.success("New Data Added"),this.confirmationService.showSuccessMessage("Added!",i.message),this.onClearForm()):this.loader=!1})}else this.toster.error("Cannot add empty value"),this.loader=!1}onDelete(t){return(0,b.mG)(this,void 0,void 0,function*(){var n={fee_component_id:t};this.confirmationService.showDeleteConfirmDialog().then(i=>{i.value&&this.apiService.postTypeRequest("fee_component/delete",n).toPromise().then(a=>{a.result?(this.toster.warning("Data deleted"),this.confirmationService.showWarningMessage("Deleted!",a.message),this.ngOnInit()):this.confirmationService.showErrorMessage("Cancelled!",a.message)})})})}showErrors(){for(var t in this.FeeComponent.controls);}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.F0),e.Y36(m.s),e.Y36(F.x),e.Y36(x.V),e.Y36(Z._W),e.Y36(C.P),e.Y36(q.Y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-fee-components"]],viewQuery:function(t,n){if(1&t&&e.Gf(_.nE,5),2&t){let i;e.iGM(i=e.CRH())&&(n.table=i.first)}},decls:72,vars:13,consts:[[1,"container-fluid"],[1,"row"],[1,"col-xl-3","xl-40"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row",2,"gap","10px"],[1,"col-12"],[3,"formGroup"],[1,"job-filter"],[1,"faq-form"],["for","title"],[1,"font-danger"],["id","title","type","text","formControlName","component_name","placeholder","Dashboard..",1,"form-control"],["class","text text-danger",4,"ngIf"],[1,"job-filter","mt-2"],["id","bg_id","formControlName","group_id",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","path"],["id","title","type","text","mask","separator.2","thousandSeparator",",","formControlName","fees","placeholder","500",1,"form-control"],[1,"row",2,"gap","20px","justify-content","center"],["type","submit",1,"btn","btn-primary","text-center","mt-4",3,"disabled","click"],["class","fa fa-circle-o-notch fa-spin",4,"ngIf"],["type","reset",1,"btn","btn-warning","text-center","mt-4",3,"click"],[1,"col-xl-9","xl-60"],[1,"collapse","show"],[1,"row","pl-3","pr-3",2,"gap","10px"],[1,"col-md-4","col-sm-12"],["for","bg_id"],["id","bg_id","placeholder","2021-2022",1,"form-control",3,"ngModel","ngModelChange","change"],["type","text","placeholder","Search..",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"col-md-3","col-sm-12","d-flex","justify-content-around"],["type","button",1,"btn","btn-warning","text-center","mt-4",2,"height","35px",3,"click"],[1,"card-body","custom-datatable"],["class","loader-box center",4,"ngIf"],["rowGroupMode","rowspan","groupRowsBy","group_name","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions",4,"ngIf"],[1,"text","text-danger"],[3,"value"],[1,"fa","fa-circle-o-notch","fa-spin"],[1,"loader-box","center"],[1,"rotate","dashed"],["rowGroupMode","rowspan","groupRowsBy","group_name","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","group_name"],["field","group_name"],["pSortableColumn","component_name"],["field","component_name"],["pSortableColumn","fees"],["field","fees"],[4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-pencil",1,"p-button-rounded","btn-primary",2,"height","35px","width","35px",3,"click"],["pButton","","pRipple","","type","button","icon","pi pi-trash",1,"p-button-rounded","btn-danger","ml-2",2,"height","35px","width","35px",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h5"),e._uU(6,"New Fee Component"),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"form",8),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"label",11),e._uU(14,"Name "),e.TgZ(15,"span",12),e._uU(16,"*"),e.qZA(),e.qZA(),e._UZ(17,"input",13),e.YNc(18,Te,2,0,"div",14),e.qZA(),e.qZA(),e.TgZ(19,"div",15),e.TgZ(20,"div",10),e.TgZ(21,"label",11),e._uU(22,"Fee Group "),e.TgZ(23,"span",12),e._uU(24,"*"),e.qZA(),e.qZA(),e.TgZ(25,"select",16),e.TgZ(26,"option",17),e._uU(27,"Select a Fee Group"),e.qZA(),e.YNc(28,Ae,2,2,"option",18),e.qZA(),e.YNc(29,Ce,2,0,"div",14),e.qZA(),e.qZA(),e.TgZ(30,"div",15),e.TgZ(31,"div",10),e.TgZ(32,"label",19),e._uU(33,"Fees "),e.qZA(),e._UZ(34,"input",20),e.YNc(35,qe,2,0,"div",14),e.qZA(),e.qZA(),e.TgZ(36,"div",21),e.TgZ(37,"button",22),e.NdJ("click",function(){return n.onAddNew()}),e._uU(38),e.YNc(39,ve,1,0,"i",23),e.qZA(),e.TgZ(40,"button",24),e.NdJ("click",function(){return n.onClearForm()}),e._uU(41,"Clear"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",25),e.TgZ(43,"div",3),e.TgZ(44,"div",4),e.TgZ(45,"h5"),e._uU(46,"Fee Groups"),e.qZA(),e.qZA(),e.TgZ(47,"div",26),e.TgZ(48,"div",5),e.TgZ(49,"div",27),e.TgZ(50,"div",28),e.TgZ(51,"div",10),e.TgZ(52,"label",29),e._uU(53,"Fee Group "),e.TgZ(54,"span",12),e._uU(55,"*"),e.qZA(),e.qZA(),e.TgZ(56,"select",30),e.NdJ("ngModelChange",function(a){return n.filterGroupValue=a})("change",function(){return n.onFilter("")}),e.TgZ(57,"option",17),e._uU(58,"Select a Fee Group"),e.qZA(),e.YNc(59,be,2,2,"option",18),e.qZA(),e.qZA(),e.qZA(),e.TgZ(60,"div",28),e.TgZ(61,"div",10),e.TgZ(62,"label",29),e._uU(63,"Fee Component"),e.qZA(),e.TgZ(64,"input",31),e.NdJ("ngModelChange",function(a){return n.filterValue=a})("keyup",function(a){return n.onFilter(a.target.value)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",32),e.TgZ(66,"button",33),e.NdJ("click",function(){return n.filterValue="",n.filterGroupValue="",n.onClear()}),e._uU(67,"Clear"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(68,"div",1),e.TgZ(69,"div",34),e.YNc(70,Fe,2,0,"div",35),e.YNc(71,Ne,3,6,"p-table",36),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(10),e.Q6J("formGroup",n.FeeComponent),e.xp6(8),e.Q6J("ngIf",n.FeeComponent.controls.component_name.touched&&(null==n.FeeComponent.controls.component_name.errors?null:n.FeeComponent.controls.component_name.errors.required)),e.xp6(10),e.Q6J("ngForOf",n.List),e.xp6(1),e.Q6J("ngIf",n.FeeComponent.controls.group_id.touched&&(null==n.FeeComponent.controls.group_id.errors?null:n.FeeComponent.controls.group_id.errors.required)),e.xp6(6),e.Q6J("ngIf",n.FeeComponent.controls.fees.touched&&(null==n.FeeComponent.controls.fees.errors?null:n.FeeComponent.controls.fees.errors.required)),e.xp6(2),e.Q6J("disabled",n.loader),e.xp6(1),e.hij("",n.loader?"":n.FeeComponent.controls.fee_component_id.value?"Update":"Add","\xa0"),e.xp6(1),e.Q6J("ngIf",n.loader),e.xp6(17),e.Q6J("ngModel",n.filterGroupValue),e.xp6(3),e.Q6J("ngForOf",n.List),e.xp6(5),e.Q6J("ngModel",n.filterValue),e.xp6(6),e.Q6J("ngIf",n.dataFetch),e.xp6(1),e.Q6J("ngIf",!n.dataFetch))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,d.O5,r.EJ,r.YN,r.Kr,d.sg,he.hx,r.On,c.iA,h.jx,c.lQ,c.fz,T.Hq,A.H],pipes:[d.H9],styles:[".center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),o})();var Je=p(61676);function Le(o,s){1&o&&e._UZ(0,"i",28)}function Ie(o,s){1&o&&(e.TgZ(0,"div",29),e._UZ(1,"span",30),e.qZA())}function Me(o,s){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",35),e._uU(2,"SlNo "),e._UZ(3,"p-sortIcon",36),e.qZA(),e.TgZ(4,"th",37),e._uU(5,"Name "),e._UZ(6,"p-sortIcon",38),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Actions"),e.qZA(),e.qZA())}function Re(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.TgZ(6,"div"),e.TgZ(7,"button",39),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).update(a)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit,n=s.rowIndex;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.name)}}const Oe=function(){return[10,25,50]};function ke(o,s){if(1&o&&(e.TgZ(0,"p-table",31,32),e.YNc(2,Me,9,0,"ng-template",33),e.YNc(3,Re,8,2,"ng-template",34),e.qZA()),2&o){const t=e.oxw();e.Q6J("value",t.List)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(5,Oe))}}const Ye=[{path:"",redirectTo:"feeGroup"},{path:"feeGroup",component:(()=>{class o{constructor(t,n,i,a,l){this.apiService=t,this.dialog=n,this.spinner=i,this.toster=a,this.confirmationService=l,this.loader=!1,this.isFeeGroupFilter=!0,this.dataFetch=!1,this.editIndex=-1,this.List=[],this.feeGroup=[],this.filterValue="",this.addValue="",this.ColumnMode=_.hq,this.SortType=_.ER}ngOnInit(){this.loader=!1,this.dataFetch=!0,this.apiService.getTypeRequest("dropdown_data/FEE_GROUP").subscribe(t=>{this.List=t.data,this.feeGroup=t.data,this.dataFetch=!1})}editClick(t,n){this.editValue=n.name,this.editIndex=t}onClear(){this.List=this.feeGroup}update(t){this.addValue=t.name,this.id=t.id,this.institution_id=t.institution_id}onFilter(t){this.editValue=t,this.List=[],this.feeGroup.filter(n=>{n.name.toLowerCase().includes(t.toLowerCase())&&this.List.push(n)})}isValueAvailable(){return!(this.List.filter(n=>{if(n.name.toLowerCase()==this.addValue.toLowerCase())return n}).length>0)}onAddNew(){if(this.loader=!0,this.addValue.length>0&&null!=this.id){var t={item_id:this.id,item_name:this.addValue};this.confirmationService.showUpdateConfirmDialog().then(i=>{i.value?this.apiService.postTypeRequest("fee_group/update",t).toPromise().then(a=>{a.result?(this.toster.warning("Data Updated"),this.confirmationService.showWarningMessage("Data Updated",a.message),this.ngOnInit(),this.Clear()):(this.confirmationService.showErrorMessage("Cancelled!",a.message),this.loader=!1)}):this.loader=!1})}else this.addValue.length>0&&this.isValueAvailable()?(this.apiService.postTypeRequest("fee_group/insert",{item_name:this.addValue}).subscribe(i=>{i.result?(this.feeGroup=i.data,this.List=i.data,this.ngOnInit(),this.Clear(),this.toster.success("New Data Added"),this.confirmationService.showSuccessMessage("Added",i.message)):this.loader=!1}),this.addValue=""):this.addValue.length>0?(this.toster.error("Value alredy Exists"),this.loader=!1):(this.toster.error("Cannot add empty value"),this.loader=!1)}Clear(){this.addValue="",this.id=null,this.institution_id=null}onDelete(t){return(0,b.mG)(this,void 0,void 0,function*(){var n={item_id:t};this.confirmationService.showDeleteConfirmDialog().then(i=>{i.value&&this.apiService.postTypeRequest("fee_group/delete",n).toPromise().then(a=>{a.result?(this.toster.warning("Data deleted"),this.confirmationService.showWarningMessage("Deleted",a.message),this.ngOnInit()):this.confirmationService.showErrorMessage("Cancelled!",a.message)})})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.s),e.Y36(F.x),e.Y36(x.V),e.Y36(Z._W),e.Y36(q.Y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-fee-group"]],viewQuery:function(t,n){if(1&t&&e.Gf(_.nE,5),2&t){let i;e.iGM(i=e.CRH())&&(n.table=i.first)}},decls:42,vars:8,consts:[[1,"container-fluid"],[1,"row"],[1,"col-xl-3","xl-40"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row",2,"gap","10px"],[1,"col-12"],[1,"job-filter"],[1,"faq-form"],["for","bg_id"],[1,"font-danger"],["type","text","placeholder","Tution..",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","d-flex","justify-content-around"],["type","submit",1,"btn","btn-primary",2,"max-height","36px",3,"disabled","click"],["class","fa fa-circle-o-notch fa-spin",4,"ngIf"],["type","button",1,"btn","btn-warning",2,"max-height","36px",3,"click"],[1,"col-xl-9","xl-60"],[1,"collapse","show"],[1,"row","mt-4","pl-3","pr-3"],[1,"col-md-8","col-sm-8"],["type","text","placeholder","Search..",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"search-icon",3,"icon"],[1,"col-md-3","col-sm-3","d-flex","justify-content-around"],["type","button",1,"btn","btn-warning","text-center",3,"click"],[1,"card-body","custom-datatable"],["class","loader-box center",4,"ngIf"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions",4,"ngIf"],[1,"fa","fa-circle-o-notch","fa-spin"],[1,"loader-box","center"],[1,"rotate","dashed"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["table",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","code"],["field","code"],["pSortableColumn","name"],["field","name"],["pButton","","pRipple","","type","button","icon","pi pi-pencil",1,"p-button-rounded",2,"height","35px","width","35px",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h5"),e._uU(6,"New Fee Groups"),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"label",10),e._uU(13,"Name "),e.TgZ(14,"span",11),e._uU(15,"*"),e.qZA(),e.qZA(),e.TgZ(16,"input",12),e.NdJ("ngModelChange",function(a){return n.addValue=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",13),e.TgZ(18,"button",14),e.NdJ("click",function(){return n.onAddNew()}),e._uU(19),e.YNc(20,Le,1,0,"i",15),e.qZA(),e.TgZ(21,"button",16),e.NdJ("click",function(){return n.Clear()}),e._uU(22," Clear "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",17),e.TgZ(24,"div",3),e.TgZ(25,"div",4),e.TgZ(26,"h5"),e._uU(27,"Fee Groups"),e.qZA(),e.qZA(),e.TgZ(28,"div",18),e.TgZ(29,"div",5),e.TgZ(30,"div",19),e.TgZ(31,"div",20),e.TgZ(32,"div",9),e.TgZ(33,"input",21),e.NdJ("ngModelChange",function(a){return n.filterValue=a})("keyup",function(a){return n.onFilter(a.target.value)}),e.qZA(),e._UZ(34,"app-feather-icons",22),e.qZA(),e.qZA(),e.TgZ(35,"div",23),e.TgZ(36,"button",24),e.NdJ("click",function(){return n.filterValue="",n.onClear()}),e._uU(37," Clear "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",1),e.TgZ(39,"div",25),e.YNc(40,Ie,2,0,"div",26),e.YNc(41,ke,4,6,"p-table",27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(16),e.Q6J("ngModel",n.addValue),e.xp6(2),e.Q6J("disabled",n.loader),e.xp6(1),e.hij(" ",n.loader?"":null!=n.id?"Update":"Add","\xa0"),e.xp6(1),e.Q6J("ngIf",n.loader),e.xp6(13),e.Q6J("ngModel",n.filterValue),e.xp6(1),e.Q6J("icon","search"),e.xp6(6),e.Q6J("ngIf",n.dataFetch),e.xp6(1),e.Q6J("ngIf",!n.dataFetch))},directives:[r.Fj,r.JJ,r.On,d.O5,Je.A,c.iA,h.jx,c.lQ,c.fz,T.Hq,A.H],styles:[".center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.btn-circle[_ngcontent-%COMP%]{width:35px;height:35px;padding:0;border-radius:50%;font-size:12px}.btn-circle1[_ngcontent-%COMP%]{width:30px;height:30px;padding:0;border-radius:50%;font-size:12px}"]}),o})(),data:{title:"Fee Groups",breadcrumb:"Fee Groups"}},{path:"feeComponents",component:Se,data:{title:"Fee Components",breadcrumb:"Fee Components"}},{path:"assignFees",component:ee,data:{title:"Assign Fees",breadcrumb:"Assign Fees"}},{path:"collectFees",component:fe,data:{title:"Collect Fees",breadcrumb:"Collect Fees"}}];let Pe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.Bz.forChild(Ye)],g.Bz]}),o})()}}]);